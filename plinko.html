<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Plinko Clone UI</title>

<style>

/* GLOBAL BACKGROUND */
body{
  background:#110909;
  margin:0;
  padding:25px 0;
  font-family:"Inter", Arial, sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  color:#ddd;
}

/* BALANCE BAR */
#balance-box{
  width:420px;
  height:50px;
  background:#0c0a0b;
  border:1px solid #3a2828;
  border-radius:40px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 18px;
  font-size:16px;
  font-weight:700;
}

#balance-label{
  color:#e5e0d0;
}

#balance-amount{
  background:linear-gradient(90deg,#b1a276,#958b63);
  padding:7px 22px;
  border-radius:40px;
  color:#fffdf2;
  font-weight:700;
  font-size:15px;
}

/* PLINKO AREA — OPEN BACKGROUND */
#plinko-box{
  width:420px;
  height:550px;
  background:none !important;
  border:none !important;
  border-radius:0 !important;
  margin-top:25px;
  position:relative;
  overflow:hidden;
}

/* PEGS */
.peg{
  width:9px;
  height:9px;
  background:#d2d2d2;
  opacity:0.55;
  border-radius:50%;
  position:absolute;
  transition:120ms;
  box-shadow:0 1px 0 rgba(0,0,0,0.25) inset;
}

/* CONTROLS */
#controls{
  width:420px;
  background:#201617;
  border-radius:16px;
  border:1px solid #3a2c2e;
  margin-top:25px;
  padding:18px;
}

.top-tabs{display:flex;gap:12px;}
.tab-btn{
  width:110px;
  height:40px;
  background:#2a2324;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  opacity:0.75;
  cursor:pointer;
}
.tab-active{
  background:#3a2f31 !important;
  opacity:1 !important;
}

#bet-row{margin-top:18px;display:flex;gap:8px;}
#bet-input{
  width:200px;
  height:42px;
  background:#2a2324;
  border:1px solid #3a2c2e;
  border-radius:8px;
  padding-left:12px;
  font-size:16px;
  color:#fff;
  outline:none;
}
.mini-btn{
  width:60px;
  height:42px;
  background:#a49a76;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:#000;
  cursor:pointer;
}

#risk-row{display:flex;margin-top:18px;gap:10px;}
.risk-btn{
  flex:1;
  height:42px;
  background:#2a2324;
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  border:1px solid transparent;
  font-weight:600;
  cursor:pointer;
}
.risk-active{
  border:2px solid #e8ce6b !important;
  background:#2a2414 !important;
  color:#f5e7a4;
}

#bet-button{
  width:100%;
  height:50px;
  background:#b7ac8a;
  color:#000;
  margin-top:22px;
  border-radius:10px;
  font-size:18px;
  font-weight:700;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
}

@media(max-width:480px){
  #plinko-box,#controls,#balance-box{width:360px}
}

</style>
</head>

<body>

<!-- BALANCE BAR -->
<div id="balance-box">
  <div id="balance-label">BALANCE</div>
  <div id="balance-amount">$0.00</div>
</div>

<!-- PLINKO AREA (OPEN, NO BOX) -->
<div id="plinko-box"></div>

<!DOCTYPE html>
<html>
<head>
<style>

body {
  margin:0;
  padding:25px 0;
  font-family:"Inter", Arial, sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  color:#ddd;

  /* --- NEW STRIPED BACKGROUND (3 horizontal, 3 vertical) --- */
  background:

    /* 3 thin horizontal stripes */
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.06) 0px,
      rgba(255,255,255,0.06) 2px,
      transparent 2px,
      transparent 160px
    ),

    /* 3 thin vertical stripes */
    repeating-linear-gradient(
      to right,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 2px,
      transparent 2px,
      transparent 160px
    ),

    /* Main dark → darker gradient */
    linear-gradient(
      to bottom,
      #2b1d1d,
      #1a1212 40%,
      #0f0a0a 100%
    );
}



#controls {
  width: 390px;
  padding: 22px;
  background: #1a1414;
  border: 2px solid #5b4d43;
  border-radius: 18px;
  margin: 40px auto;
  box-shadow: 0 0 35px rgba(0,0,0,0.6);
  color: #d4cbb2;
}

/* Tabs */
.top-tabs {
  display: flex;
  gap: 18px;
  margin-bottom: 18px;
}

.tab-btn {
  background: #2b2424;
  padding: 10px 28px;
  border-radius: 8px;
  color: #c6c4c4;
  font-weight: 600;
  font-size: 16px;
  transition: .15s;
}

.tab-active {
  background: linear-gradient(#bca68c, #927c67);
  color: white;
  box-shadow: 0 0 6px rgba(255,210,169,0.4);
}

/* Labels */
label {
  font-size: 14px;
  font-weight: 700;
  margin-bottom: 8px;
  display: block;
}

/* Bet row */
#bet-row {
  display: flex;
  height: 46px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #4d3e37;
}

#bet-row div,
#bet-row input {
  display: flex;
  align-items: center;
  justify-content: center;
}

#dollar-box {
  width: 48px;
  background: #2a2324;
  color: white;
  border-right: 1px solid #4d3e37;
}

#bet-input {
  flex: 1;
  background: #2a2324;
  border: none;
  color: white;
  padding-left: 12px;
  font-size: 16px;
  outline: none;
}

.mini-btn {
  width: 70px;
  background: linear-gradient(#cbb998, #a49272);
  color: #3d342e;
  font-weight: 700;
  border-left: 1px solid #5c4c3d;
}

/* Risk Row */
#risk-row {
  display: flex;
  gap: 14px;
  margin-top: 10px;
}

.risk-btn {
  flex: 1;
  background: #221b1f;
  border-radius: 10px;
  padding: 14px 0;
  text-align: center;
  font-size: 16px;
  color: #b7b7c9;
  position: relative;
  border: 1px solid transparent;
}

.risk-btn::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 50%;
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.6;
}

.risk-low::before { background: #3b8aff; }
.risk-med::before { background: #a16aff; }
.risk-high::before { background: #d6b32e; }

.risk-active {
  border: 1px solid #4e7cff;
  background: #13203d !important;
  color: white;
}

.risk-active.risk-med {
  border: 1px solid #8237ff;
  background: #251433 !important;
}

.risk-active.risk-high {
  border: 1px solid #e6c568;
  background: #3b321f !important;
}

/* Bet button */
#bet-button {
  margin-top: 26px;
  background: linear-gradient(#d0c3a6, #a59679);
  color: white;
  padding: 14px 0;
  text-align: center;
  border-radius: 12px;
  font-size: 20px;
  font-weight: 700;
  box-shadow: inset 0 0 12px rgba(255,255,255,0.25);
}

</style>
</head>
<body>

<div id="controls">

  <div class="top-tabs">
    <div class="tab-btn tab-active">Manual</div>
    <div class="tab-btn">Auto</div>
  </div>

  <label>Bet Amount</label>

  <div id="bet-row">
    <div id="dollar-box">$</div>
    <input id="bet-input" type="number" value="0.00">
    <div class="mini-btn">1/2</div>
    <div class="mini-btn">2x</div>
  </div>

  <label style="margin-top:20px;">Risk</label>

  <div id="risk-row">
    <div class="risk-btn risk-low risk-active">Low</div>
    <div class="risk-btn risk-med">Medium</div>
    <div class="risk-btn risk-high">High</div>
  </div>

  <div id="bet-button">Bet</div>

</div>

</body>
</html>


<script>
/* =========================
   Plinko JS — Fixed Version
   17-slot layout, 16 rows
   ========================= */

const RISK_CONFIG_17 = {
  low: {
    multipliers: ["21x","5x","2x","1.4x","1.2x","1.1x","1.1xx","1x","0.5x","1x","1.1x","1.1x","1.2x","1.4x","2x","5x","21x"],
    bars: ["#d4a93a","#b66f17","#7a2ca8","#a34ed6","#b84fe6","#ff7b00","#7a2ca8","#8f4bd4","#4a66ff","#585858","#4a66ff","#8f4bd4","#7a2ca8","#a34ed6","#b66f17","#ff7b00","#d4a93a"],
    weights: [1,2,3,4,5,2,3,4,10,40,10,4,3,2,1,2,1]
  },
  medium: {
    multipliers: ["110x","23x","9x","4x","3x","1.5x","1x","0.5x","0.3","0.3x","0.5x","1x","1.5x","3x","4x","9x","23x","110x"],
    bars: ["#d4a93a","#b66f17","#7a2ca8","#9d31c7","#6f4dd6","#4a66ff","#2f8fff","#1788ff","#2f6f9f","#2f6f9f","#1788ff","#2f8fff","#4a66ff","#6f4dd6","#9d31c7","#b66f17","#d4a93a"],
    weights: [1,2,3,5,8,10,12,20,25,25,20,12,10,8,5,3,1]
  },
  high: {
    multipliers: ["1000x","123x","19x","9x","4x","2x","1x","0.2x","0.2x","0.2x","1x","2x","4x","9x","19x","123x","1000x"],
    bars: ["#d4a93a","#b66f17","#f55fb2","#9d31c7","#7a2ca8","#425dff","#4a66ff","#616161","#616161","#616161","#4a66ff","#425dff","#7a2ca8","#9d31c7","#f55fb2","#b66f17","#d4a93a"],
    weights: [0.2,0.5,1,2,4,8,10,30,60,30,10,8,4,2,1,0.5,0.2]
  }
};

/* ========== UTILITIES ========== */
function chooseWeighted(weights){
  const total = weights.reduce((s,v)=>s+v,0);
  let r = Math.random()*total;
  for(let i=0;i<weights.length;i++){
    r -= weights[i];
    if(r <= 0) return i;
  }
  return weights.length - 1;
}

function parseNumber(v, fallback=0){
  const n = parseFloat(v);
  return isNaN(n) ? fallback : n;
}

/* ========== PEGS ========== */
function generatePegs(){
  const box = document.getElementById("plinko-box");
  box.querySelectorAll(".peg").forEach(e=>e.remove());
  const startX = 210;
  const startY = 34;
  const rowGap = 27;
  const colGap = 20;

  for(let r=0;r<16;r++){
    const count = r+1;
    const offsetX = startX - (count*colGap)/2;
    for(let i=0;i<count;i++){
      const peg = document.createElement("div");
      peg.className = "peg";
      peg.style.left = (offsetX + i*colGap) + "px";
      peg.style.top = (startY + r*rowGap) + "px";
      peg.dataset.row = r;
      peg.dataset.col = i;
      box.appendChild(peg);
    }
  }
}

/* ========== SLOTS ========== */
function generateSlotsForRisk(riskKey){
  const box = document.getElementById("plinko-box");
  // remove old bars and labels
  box.querySelectorAll(".slot-bar, .slot-text").forEach(e => e.remove());

  const cfg = RISK_CONFIG_17[riskKey];
  if (!cfg) return;

  const count = cfg.multipliers.length;
  const gap = 22;
  const startX = (box.clientWidth - ((count-1) * gap)) / 2;

  for(let i = 0; i < count; i++){
    // --- Create bar ---
    const bar = document.createElement("div");
    bar.className = "slot-bar";
    bar.dataset.index = i;
    bar.style.position = "absolute";
    bar.style.left = (startX + i * gap) + "px";
    bar.style.bottom = "20px";     // below multiplier
    bar.style.width = "10px";       // thinner
    bar.style.height = "10px";     // taller than before but below numbers
    bar.style.borderRadius = "6px";
    bar.style.background = cfg.bars[i];
    box.appendChild(bar);

    // --- Create multiplier label ---
    const label = document.createElement("div");
    label.className = "slot-text";
    label.dataset.index = i;
    label.style.position = "absolute";
    label.style.left = (startX + i * gap) + "px";
    label.style.bottom = "60px";   // above the bar
    label.style.width = "16px";    // narrow for vertical text
    label.style.fontSize = "12px";
    label.style.fontWeight = "700";
    label.style.color = "#e7d08b";
    label.style.textAlign = "center";
    label.style.transform = "translateX(-50%) rotate(-90deg)"; // 90° rotation
    label.style.transformOrigin = "center center";
    label.innerText = cfg.multipliers[i];
    box.appendChild(label);
  }
}

/* ========== BALL ANIMATION ========== */
function flashPeg(peg){
  if(!peg) return;
  const prevBg = peg.style.background;
  const prevOp = peg.style.opacity;
  peg.style.background = "#ffffff";
  peg.style.opacity = "1";
  setTimeout(()=>{ peg.style.background = prevBg; peg.style.opacity = prevOp; },110);
}

function highlightSlot(index){
  const box = document.getElementById("plinko-box");
  const slot = [...box.querySelectorAll(".slot-bar")].find(s=>+s.dataset.index===index);
  if(!slot) return;
  const prev = slot.style.boxShadow;
  slot.style.boxShadow = "0 0 14px 6px rgba(255,255,255,0.08)";
  setTimeout(()=> slot.style.boxShadow = prev,900);
}

function dropBallTowardsSlot(slotIndex){
  const box = document.getElementById("plinko-box");
  const ball = document.createElement("div");
  ball.style.width = "12px";
  ball.style.height = "12px";
  ball.style.borderRadius = "50%";
  ball.style.position = "absolute";
  ball.style.background = "#f2f2f2";
  ball.style.left = "210px";
  ball.style.top = "6px";
  ball.style.transform = "translate(-50%,-50%)";
  ball.style.zIndex = 1200;
  box.appendChild(ball);

  const pegs = [...box.querySelectorAll(".peg")];
  const rows = {};
  pegs.forEach(p=>{ const r=+p.dataset.row; if(!rows[r]) rows[r]=[]; rows[r].push(p); });
  const totalRows = Math.max(...Object.keys(rows))+1;

  const slotBars = [...box.querySelectorAll(".slot-bar")];
  const targetSlot = slotBars.find(s => +s.dataset.index===slotIndex) || slotBars[Math.floor(slotBars.length/2)];
  const targetRect = targetSlot.getBoundingClientRect();
  const boxRect = box.getBoundingClientRect();
  const targetX = (targetRect.left + targetRect.width/2) - boxRect.left;

  let currentX = 210;
  let currentY = 6;
  let row = 0;
  const stepMs = 220; // slower per row

  const interval = setInterval(()=>{
    if(row >= totalRows){
      clearInterval(interval);
      const bottomY = box.clientHeight - 62;
      // final slow drop to slot
      ball.style.transition = "left 700ms ease-in-out, top 700ms ease-in-out";
      ball.style.left = targetX + "px";
      ball.style.top = bottomY + "px";
      setTimeout(()=>{
        ball.style.transition = "top 500ms ease-out";
        ball.style.top = (box.clientHeight-36)+"px";
        highlightSlot(slotIndex);
        setTimeout(()=>ball.remove(),1000);
      },750);
      return;
    }

    const rowPegs = rows[row];
    if(!rowPegs || rowPegs.length===0){ row++; return; }

    // Ball moves slightly toward target, with horizontal wobble
    let closest = rowPegs[0];
    let bestDist = Math.abs(getCenterX(closest)-currentX);
    for(const p of rowPegs){
      const d = Math.abs(getCenterX(p)-currentX);
      if(d<bestDist){ bestDist=d; closest=p; }
    }

    const pegX = getCenterX(closest) + (Math.random()*6-3); // wobble ±3px
    const pegY = getCenterY(closest);

    ball.style.transition = "left 180ms ease-in-out, top 180ms ease-in-out";
    ball.style.left = pegX + "px";
    ball.style.top = pegY + "px";

    flashPeg(closest); // highlight peg hit
    row++;
  }, stepMs);
}


function getCenterX(elem){
  const box = document.getElementById("plinko-box").getBoundingClientRect();
  const r = elem.getBoundingClientRect();
  return (r.left + r.width/2) - box.left;
}
function getCenterY(elem){
  const box = document.getElementById("plinko-box").getBoundingClientRect();
  const r = elem.getBoundingClientRect();
  return (r.top + r.height/2) - box.top;
}

/* ========== BET RESOLUTION & BALANCE ========== */
function resolveBet(slotIndex, risk, betAmount){
  const cfg = RISK_CONFIG_17[risk];
  const multiplierStr = cfg.multipliers[slotIndex];
  const multiplier = parseFloat(multiplierStr.replace("x","")) || 0;
  const payout = multiplier * betAmount;
  const profit = payout - betAmount;
  const won = payout > betAmount;

  const balEl = document.getElementById("balance-amount");
  let cur = parseNumber(balEl.innerText.replace(/\$/g,''),0);
  cur -= betAmount;
  cur += payout;
  balEl.innerText = "$"+cur.toFixed(2);

  showResultToast(won, multiplier, profit);
}

function showResultToast(won, multiplier, profit){
  const toast = document.createElement("div");
  toast.style.position = "fixed";
  toast.style.left = "50%";
  toast.style.top = "22px";
  toast.style.transform = "translateX(-50%)";
  toast.style.padding = "10px 18px";
  toast.style.borderRadius = "10px";
  toast.style.zIndex = 9999;
  toast.style.color = "#fff";
  toast.style.fontWeight = "700";
  toast.style.boxShadow = "0 6px 20px rgba(0,0,0,0.45)";
  toast.style.background = won ? "linear-gradient(90deg,#2f8f4a,#6ccf85)" : "linear-gradient(90deg,#6b2a2a,#c15a5a)";
  toast.innerText = won ? `Win! x${multiplier} — Profit $${profit.toFixed(2)}` : `Loss — x${multiplier}`;
  document.body.appendChild(toast);
  setTimeout(()=>{ toast.style.transition = "opacity 380ms"; toast.style.opacity="0"; setTimeout(()=>toast.remove(),420); },1500);
}

/* ========== MAIN ========== */
function dropBall(risk){
  const cfg = RISK_CONFIG_17[risk];
  const index = chooseWeighted(cfg.weights);
  dropBallTowardsSlot(index);

  const betInput = document.getElementById("bet-input");
  const betAmount = Math.max(0.01, parseNumber(betInput.value,0.01));
  setTimeout(()=> resolveBet(index,risk,betAmount),2200);
}

/* ========== HOOK UI ========== */
function initControls(){
  document.querySelectorAll(".risk-btn").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      document.querySelectorAll(".risk-btn").forEach(b=>b.classList.remove("risk-active"));
      btn.classList.add("risk-active");
      const risk = btn.innerText.toLowerCase();
      generateSlotsForRisk(risk);
    });
  });

  document.getElementById("bet-button").addEventListener("click", ()=>{
    const active = document.querySelector(".risk-active");
    const risk = (active && active.innerText.toLowerCase()) || "high";
    const btn = document.getElementById("bet-button");
    btn.style.pointerEvents = "none";
    setTimeout(()=> btn.style.pointerEvents="auto",2400);
    dropBall(risk);
  });

  document.querySelectorAll(".mini-btn").forEach(mb=>{
    mb.addEventListener("click", ()=>{
      const inp = document.getElementById("bet-input");
      const val = parseNumber(inp.value,0.1);
      if(mb.innerText.includes("½")) inp.value = (val/2).toFixed(2);
      else if(mb.innerText.includes("2")) inp.value = (val*2).toFixed(2);
    });
  });

  document.querySelectorAll(".tab-btn").forEach(tab=>{
    tab.addEventListener("click", ()=>{
      document.querySelectorAll(".tab-btn").forEach(t=>t.classList.remove("tab-active"));
      tab.classList.add("tab-active");
    });
  });
}

/* ========== INIT ========== */
generatePegs();
generateSlotsForRisk("high"); // default
initControls();

window._plinko = { generatePegs, generateSlotsForRisk, dropBall, RISK_CONFIG_17 };
</script>
</body>
</html>
<div id="bg-vertical"></div>
